# Apache Kafka для разработки и архитектуры

### Модуль 2
Проектная работа по теме Реализация потоковой обработки на базе Apache Kafka

### Задача
Разработка фунциональности фильтрации сообщений от заблокированных пользователей, а также замены запрещенных слов в 
тексте с помощью библиотеки для потоковой обработки данных.

### Основные компоненты
Реализованы следующие компоненты:

1. Сервис, отвечающий за блокировку пользоваталей (user-service)
    - при обращении к АПИ генерирует и отправляет в топик blocked_users сообщения о событиях блокировки

2. Сервис, отвечающий за набор слов, подлежащих цензурированию (moderation-service)
    - при обращении к АПИ генерирует и отправляет в топик censored_words сообщения о добавлении/исключении слов из 
    списка запрещенных.

3. Сервис, отвечающий за отправку сообщений между пользователями (messaging-service)
    - при обращении к АПИ генерирует и отправляет в топик messages сообщения 

4. Сервис, отвечающий за реализацию функциональных требований (kafka-streams-app)
    - фильтрует сообщения от нежелательных пользователей на основании данных топика blocked_users
    - маскирует запрещенные слова в тексте сообщений на основании данных топика censored_words
    - публикует результат в топик filtered_messages

### Настройка и запуск
1. Сборка проекта ```mvn clean package```
2. Установка и запуск Kafka-кластера и сервисов ```docker-compose up -d```

### Тестирование
1. После запуска контейнеров в docker необходимо создать все необходимые для работы топики.
+ [команды для создания топиков](topic.txt)

2. Ожидание (не более 1 минуты) пока kafka-streams-app выполнит подключение к созданным топикам.

3. Наполнение тестовыми данными топика запрещенных слов
+ [команды для наполнения тестовыми данными топика запрещенных слов](moderation-service/censored_words_data.txt)
4. Наполнение тестовыми данными топика заблокированных пользователей
+ [команды для наполнения тестовыми данными топика заблокированных пользователей](user-service/users_data.txt)
5. Отправка сообщений и оценка ожидаемого результата
+ [команды для отправки сообщений и ожидаемый результат](messaging-service/message_data.txt)
